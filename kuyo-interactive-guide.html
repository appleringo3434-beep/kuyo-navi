<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾›é¤ŠãƒŠãƒ“ãƒ»ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¬ã‚¤ãƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: A task-oriented dashboard structure was chosen to guide users directly to their area of concern (funerals, graves, costs, etc.), which is more efficient than a traditional blog format for an audience likely under stress. The user selects a major topic, and the main content area dynamically updates with interactive elements like timelines, comparison cards, or charts. This approach breaks down complex information into manageable, explorable chunks, prioritizing user clarity and ease of navigation over the source's linear article structure. -->
    <!-- Visualization & Content Choices: 
        - Funeral Process: Report Info -> Steps of a Japanese funeral. Goal -> Understand a process. Viz -> Interactive step-by-step timeline. Interaction -> Click steps to reveal details. Justification -> Simplifies a complex, linear process. Method -> HTML/CSS/JS.
        - Types of Graves: Report Info -> Different grave options. Goal -> Compare options. Viz -> Tabbed content cards. Interaction -> Click tabs to switch views. Justification -> Allows for easy side-by-side comparison of features and costs. Method -> HTML/CSS/JS.
        - Service Costs: Report Info -> Average costs for services. Goal -> Compare costs. Viz -> Bar Chart. Interaction -> Filter by service type. Justification -> Visually represents financial differences effectively. Library -> Chart.js/Canvas.
        - Etiquette Q&A: Report Info -> Common etiquette questions. Goal -> Quick answers. Viz -> Accordion list. Interaction -> Click to expand/collapse answers. Justification -> Standard, space-saving UI for FAQs. Method -> HTML/CSS/JS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #FDFBF8;
            color: #383838;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #047857;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .timeline-item {
            position: relative;
            padding-left: 30px;
            padding-bottom: 20px;
            border-left: 2px solid #D1D5DB;
            transition: all 0.3s ease;
        }
        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }
        .timeline-dot {
            position: absolute;
            left: -9px;
            top: 4px;
            height: 16px;
            width: 16px;
            background-color: #D1D5DB;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        .timeline-item.active .timeline-dot {
            background-color: #047857;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .tab-button.active {
            border-color: #047857;
            color: #047857;
        }
    </style>
</head>
<body class="bg-amber-50 text-stone-800">

    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-emerald-800">ä¾›é¤Šã®ã¦ã³ã</h1>
            <p class="mt-2 text-stone-600">æ—¥æœ¬ã®ä¾›é¤Šã«é–¢ã™ã‚‹æ…£ç¿’ã‚’ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚</p>
        </header>

        <nav class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <button data-view="funeral" class="nav-button active bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸ•Šï¸</span>
                <span class="block mt-1 font-semibold text-emerald-700">è‘¬å„€ã®æµã‚Œ</span>
            </button>
            <button data-view="graves" class="nav-button bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸª¦</span>
                <span class="block mt-1 font-semibold text-emerald-700">ãŠå¢“ã®ç¨®é¡</span>
            </button>
            <button data-view="costs" class="nav-button bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸ’°</span>
                <span class="block mt-1 font-semibold text-emerald-700">è²»ç”¨ã®ç›®å®‰</span>
            </button>
            <button data-view="etiquette" class="nav-button bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸ¤</span>
                <span class="block mt-1 font-semibold text-emerald-700">ä½œæ³•ã¨ãƒãƒŠãƒ¼</span>
            </button>
        </nav>

        <main id="main-content" class="bg-white p-6 rounded-lg shadow-inner">
            <section id="funeral" class="content-section active">
                <h2 class="text-2xl font-bold mb-4 text-emerald-800">è‘¬å„€ã®æµã‚Œã‚’ç†è§£ã™ã‚‹</h2>
                <p class="mb-6 text-stone-600">ã”é€å»ã‹ã‚‰æ³•è¦ã¾ã§ã€ä¸€èˆ¬çš„ãªä»å¼ã®è‘¬å„€ã®æµã‚Œã‚’ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«è§£èª¬ã—ã¾ã™ã€‚å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€è©³ã—ã„èª¬æ˜ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                <div class="md:flex md:space-x-8">
                    <div id="timeline-container" class="md:w-1/3">
                    </div>
                    <div id="timeline-details" class="md:w-2/3 mt-6 md:mt-0 p-4 bg-amber-50 rounded-lg">
                    </div>
                </div>
            </section>

            <section id="graves" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-emerald-800">ãŠå¢“ã®ç¨®é¡ã‚’é¸ã¶</h2>
                <p class="mb-6 text-stone-600">è¿‘å¹´ã€ãŠå¢“ã«å¯¾ã™ã‚‹è€ƒãˆæ–¹ã¯å¤šæ§˜åŒ–ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€ä¼çµ±çš„ãªãŠå¢“ã‹ã‚‰æ–°ã—ã„å½¢ã®ä¾›é¤Šã¾ã§ã€ãã‚Œãã‚Œã®ç‰¹å¾´ã‚„è²»ç”¨ã‚’æ¯”è¼ƒã—ã€ã‚ãªãŸã«åˆã£ãŸé¸æŠè‚¢ã‚’è¦‹ã¤ã‘ã‚‹æ‰‹åŠ©ã‘ã‚’ã—ã¾ã™ã€‚</p>
                <div id="graves-tabs" class="flex border-b border-stone-200 mb-4">
                </div>
                <div id="graves-content">
                </div>
            </section>
            
            <section id="costs" class="content-section">
                 <h2 class="text-2xl font-bold mb-4 text-emerald-800">è²»ç”¨ã®ç›®å®‰ã‚’çŸ¥ã‚‹</h2>
                <p class="mb-6 text-stone-600">ä¾›é¤Šã«ã¯æ§˜ã€…ãªè²»ç”¨ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ä¸»ãªè²»ç”¨ã®å…¨å›½çš„ãªå¹³å‡ç›¸å ´ã‚’ã‚°ãƒ©ãƒ•ã§ç¤ºã—ã¾ã™ã€‚ä¸‹ã®ãƒœã‚¿ãƒ³ã§è¡¨ç¤ºã™ã‚‹å†…å®¹ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã€è²»ç”¨ã®å…¨ä½“åƒã‚’æŠŠæ¡ã—ã¾ã—ã‚‡ã†ã€‚</p>
                <div class="text-center mb-4">
                    <select id="cost-filter" class="p-2 border rounded-md shadow-sm">
                        <option value="all">å…¨ä½“ã®è²»ç”¨</option>
                        <option value="funeral">è‘¬å„€é–¢é€£</option>
                        <option value="grave">ãŠå¢“é–¢é€£</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="costChart"></canvas>
                </div>
            </section>

            <section id="etiquette" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-emerald-800">ä½œæ³•ã¨ãƒãƒŠãƒ¼ Q&A</h2>
                <p class="mb-6 text-stone-600">å¼”äº‹ã«ãŠã‘ã‚‹æœè£…ã‚„é¦™å…¸ã€è¨€è‘‰é£ã„ãªã©ã€çŸ¥ã£ã¦ãŠããŸã„åŸºæœ¬çš„ãªãƒãƒŠãƒ¼ã‚’Q&Aå½¢å¼ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚è³ªå•ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å›ç­”ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                <div id="etiquette-accordion" class="space-y-2">
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');
            const mainContent = document.getElementById('main-content');
            
            const data = {
                funeral: [
                    { title: 'ã”é€å»ãƒ»æ¬é€', content: 'åŒ»å¸«ã‹ã‚‰æ­»äº¡è¨ºæ–­æ›¸ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ãã®å¾Œã€è‘¬å„€ç¤¾ã«é€£çµ¡ã—ã€ã”éºä½“ã‚’å®‰ç½®å ´æ‰€ï¼ˆã”è‡ªå®…ã‚„æ–å ´ãªã©ï¼‰ã¸æ¬é€ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚' },
                    { title: 'å®‰ç½®ãƒ»æ•é£¾ã‚Š', content: 'ã”éºä½“ã‚’å®‰ç½®ã—ã€æ•å…ƒã«ãŠé£¾ã‚Šã‚’ã—ã¾ã™ï¼ˆæ•é£¾ã‚Šï¼‰ã€‚ã“ã®é–“ã«ã€è‘¬å„€ç¤¾ã¨è‘¬å„€ã®æ—¥ç¨‹ã‚„å†…å®¹ã®æ‰“ã¡åˆã‚ã›ã‚’è¡Œã„ã¾ã™ã€‚' },
                    { title: 'ç´æ£ºã®å„€', content: 'ã”éºä½“ã‚’æ¸…ã‚ã€æ­»è£…æŸã‚’ç€ã›ã€ãŠæ£ºã«ç´ã‚ã‚‹å„€å¼ã§ã™ã€‚æ•…äººãŒæ„›ç”¨ã—ã¦ã„ãŸã‚‚ã®ã‚’å‰¯è‘¬å“ã¨ã—ã¦ä¸€ç·’ã«å…¥ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚' },
                    { title: 'é€šå¤œ', content: 'æ•…äººã¨è¦ªã—ã„äººã€…ãŒå¤œé€šã—æœ€å¾Œã®åˆ¥ã‚Œã‚’æƒœã—ã‚€å„€å¼ã§ã™ã€‚è¿‘å¹´ã§ã¯ã€2æ™‚é–“ç¨‹åº¦ã®ã€ŒåŠé€šå¤œã€ãŒä¸€èˆ¬çš„ã§ã™ã€‚' },
                    { title: 'è‘¬å„€ãƒ»å‘Šåˆ¥å¼', content: 'åƒ§ä¾¶ã«ã‚ˆã‚‹èª­çµŒã‚„å‚åˆ—è€…ã«ã‚ˆã‚‹ç„¼é¦™ãŒè¡Œã‚ã‚Œã¾ã™ã€‚å‘Šåˆ¥å¼ã¯ã€æ•…äººã¨ã®æœ€å¾Œã®å¯¾é¢ã‚’ã—ã€ãŠåˆ¥ã‚Œã‚’å‘Šã’ã‚‹å ´ã§ã™ã€‚' },
                    { title: 'ç«è‘¬ãƒ»éª¨ä¸Šã’', content: 'ç«è‘¬å ´ã§ã”éºä½“ã‚’ç«è‘¬ã—ã¾ã™ã€‚ç«è‘¬å¾Œã€éºéª¨ã‚’éª¨å£·ã«ç´ã‚ã‚‹ã€Œéª¨ä¸Šã’ã€ã‚’è¿‘è¦ªè€…ã§è¡Œã„ã¾ã™ã€‚' },
                    { title: 'åˆä¸ƒæ—¥æ³•è¦', content: 'æœ¬æ¥ã¯äº¡ããªã£ã¦ã‹ã‚‰7æ—¥ç›®ã«è¡Œã†æ³•è¦ã§ã™ãŒã€æœ€è¿‘ã§ã¯ç«è‘¬å¾Œã‚„è‘¬å„€å½“æ—¥ã«ç¹°ã‚Šä¸Šã’ã¦è¡Œã†ã€Œç¹°ã‚Šä¸Šã’æ³•è¦ã€ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚' }
                ],
                graves: [
                    { name: 'ä¸€èˆ¬å¢“', features: ['ä»£ã€…å—ã‘ç¶™ãŒã‚Œã‚‹ä¼çµ±çš„ãªãŠå¢“', 'çŸ³æã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’è‡ªç”±ã«é¸ã¹ã‚‹', 'å¹´é–“ç®¡ç†è²»ãŒå¿…è¦', 'ç¶™æ‰¿è€…ãŒå¿…è¦', 'ç´„150ä¸‡ã€œ350ä¸‡å††'], pros: ['ä»£ã€…å—ã‘ç¶™ã’ã‚‹', 'è‡ªç”±ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã§ãã‚‹'], cons: ['è²»ç”¨ãŒé«˜ã‚', 'ç®¡ç†ã®æ‰‹é–“ãŒã‹ã‹ã‚‹'] },
                    { name: 'æ¨¹æœ¨è‘¬', features: ['å¢“çŸ³ã®ä»£ã‚ã‚Šã«æ¨¹æœ¨ã‚’å¢“æ¨™ã¨ã™ã‚‹', 'è‡ªç„¶ã«é‚„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§äººæ°—', 'ç¶™æ‰¿è€…ãŒä¸è¦ãªå ´åˆãŒå¤šã„', 'ç´„30ä¸‡ã€œ80ä¸‡å††'], pros: ['è²»ç”¨ãŒæ¯”è¼ƒçš„å®‰ä¾¡', 'ç¶™æ‰¿è€…ä¸è¦'], cons: ['åˆ†éª¨ã‚„æ”¹è‘¬ãŒå›°é›£', 'è¦ªæ—ã®ç†è§£ãŒå¿…è¦ãªå ´åˆã‚‚'] },
                    { name: 'ç´éª¨å ‚', features: ['å±‹å†…ã«éºéª¨ã‚’å®‰ç½®ã™ã‚‹æ–½è¨­', 'å¤©å€™ã«å·¦å³ã•ã‚ŒãšãŠå‚ã‚Šã§ãã‚‹', 'äº¤é€šã®ä¾¿ãŒè‰¯ã„å ´æ‰€ãŒå¤šã„', 'ç´„50ä¸‡ã€œ150ä¸‡å††'], pros: ['åˆ©ä¾¿æ€§ãŒé«˜ã„', 'ç®¡ç†ãŒæ¥½'], cons: ['æ°¸ä»£ã«æ¸¡ã‚‹ä¾›é¤ŠãŒé›£ã—ã„å ´åˆã‚‚', 'å€‹åˆ¥ã‚¹ãƒšãƒ¼ã‚¹ãŒç‹­ã„'] },
                    { name: 'æ°¸ä»£ä¾›é¤Šå¢“', features: ['å¯ºé™¢ã‚„éœŠåœ’ãŒæ°¸ä»£ã«ã‚ãŸã‚Šä¾›é¤Šãƒ»ç®¡ç†', 'ç¶™æ‰¿è€…ãŒã„ãªã„æ–¹å‘ã‘', 'ä»–ã®æ–¹ã®éºéª¨ã¨ä¸€ç·’ã«ç¥€ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„', 'ç´„10ä¸‡ã€œ100ä¸‡å††'], pros: ['è²»ç”¨ãŒå®‰ä¾¡', 'ç¶™æ‰¿è€…ä¸è¦', 'ç®¡ç†ãŒä¸è¦'], cons: ['ä»–ã®æ–¹ã¨ä¸€ç·’ã«åˆè‘¬ã•ã‚Œã‚‹', 'å€‹åˆ¥ã®ãŠå¢“ãŒãªã„'] },
                ],
                costs: {
                    labels: ['è‘¬å„€ä¸€å¼', 'é£²é£Ÿæ¥å¾…è²»', 'å¯ºé™¢è²»ç”¨', 'ä¸€èˆ¬å¢“', 'æ¨¹æœ¨è‘¬', 'ç´éª¨å ‚'],
                    datasets: [{
                        label: 'è²»ç”¨ï¼ˆä¸‡å††ï¼‰',
                        data: [120, 30, 45, 200, 60, 100],
                        backgroundColor: ['#10B981', '#34D399', '#6EE7B7', '#065F46', '#047857', '#059669'],
                    }],
                    filters: {
                        all: [0, 1, 2, 3, 4, 5],
                        funeral: [0, 1, 2],
                        grave: [3, 4, 5]
                    }
                },
                etiquette: [
                    { question: 'é€šå¤œã‚„è‘¬å„€ã®æœè£…ã¯ï¼Ÿ', answer: 'ç”·æ€§ã¯ãƒ–ãƒ©ãƒƒã‚¯ã‚¹ãƒ¼ãƒ„ã€å¥³æ€§ã¯ãƒ–ãƒ©ãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒãƒ«ãŒåŸºæœ¬ã§ã™ã€‚å­¦ç”Ÿã¯åˆ¶æœã§æ§‹ã„ã¾ã›ã‚“ã€‚å…‰æ²¢ã®ã‚ã‚‹ç´ æã‚„æ´¾æ‰‹ãªã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚' },
                    { question: 'é¦™å…¸ã®é‡‘é¡ã®ç›®å®‰ã¯ï¼Ÿ', answer: 'æ•…äººã¨ã®é–¢ä¿‚æ€§ã«ã‚ˆã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯çŸ¥äººãƒ»å‹äººãªã‚‰5åƒå††ã€è¦ªæ—ãªã‚‰1ä¸‡ã€œ5ä¸‡å††ãŒç›®å®‰ã§ã™ã€‚æ–°æœ­ã¯é¿ã‘ã€æ—§æœ­ã‚’é¦™å…¸è¢‹ã«å…¥ã‚Œã¾ã™ã€‚' },
                    { question: 'ãŠæ‚”ã‚„ã¿ã®è¨€è‘‰ã¯ï¼Ÿ', answer: 'ã€Œã“ã®åº¦ã¯ã”æ„å‚·æ§˜ã§ã™ã€ã€Œå¿ƒã‚ˆã‚ŠãŠæ‚”ã‚„ã¿ç”³ã—ä¸Šã’ã¾ã™ã€ãªã©ãŒä¸€èˆ¬çš„ã§ã™ã€‚ã€Œé‡ã­é‡ã­ã€ã€ŒãŸã³ãŸã³ã€ãªã©ã®é‡ã­è¨€è‘‰ã‚„ã€ç›´æ¥çš„ãªæ­»å› ã‚’å°‹ã­ã‚‹ã“ã¨ã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚' },
                    { question: 'ç„¼é¦™ã®ä½œæ³•ã¯ï¼Ÿ', answer: 'å®—æ´¾ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯å³æ‰‹ã®è¦ªæŒ‡ãƒ»äººå·®ã—æŒ‡ãƒ»ä¸­æŒ‡ã§æŠ¹é¦™ã‚’ã¤ã¾ã¿ã€é¡ã«æŠ¼ã—ã„ãŸã ã„ã¦ã‹ã‚‰é¦™ç‚‰ã«ãã¹ã¾ã™ã€‚å›æ•°ã¯1ã€œ3å›ãŒåŸºæœ¬ã§ã™ã€‚' }
                ]
            };
            
            let costChart;

            function switchView(view) {
                navButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if(btn.dataset.view === view) {
                        btn.classList.add('active');
                    }
                });

                contentSections.forEach(section => {
                    section.classList.remove('active');
                    if(section.id === view) {
                        section.classList.add('active');
                    }
                });

                if (view === 'costs') {
                    if (!costChart) {
                        initCostChart();
                    }
                    updateCostChart('all');
                }
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => switchView(button.dataset.view));
            });
            
            function initFuneralTimeline() {
                const container = document.getElementById('timeline-container');
                const details = document.getElementById('timeline-details');
                
                data.funeral.forEach((item, index) => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'timeline-item cursor-pointer';
                    itemEl.dataset.index = index;
                    itemEl.innerHTML = `
                        <div class="timeline-dot"></div>
                        <p class="font-semibold text-stone-700">${index + 1}. ${item.title}</p>
                    `;
                    container.appendChild(itemEl);
                });

                const timelineItems = container.querySelectorAll('.timeline-item');
                
                function selectTimelineItem(index) {
                    timelineItems.forEach(item => item.classList.remove('active'));
                    timelineItems[index].classList.add('active');
                    details.innerHTML = `
                        <h3 class="font-bold text-lg text-emerald-700 mb-2">${data.funeral[index].title}</h3>
                        <p class="text-stone-600">${data.funeral[index].content}</p>
                    `;
                }

                timelineItems.forEach(item => {
                    item.addEventListener('click', () => selectTimelineItem(item.dataset.index));
                });
                
                selectTimelineItem(0);
            }

            function initGravesTabs() {
                const tabsContainer = document.getElementById('graves-tabs');
                const contentContainer = document.getElementById('graves-content');

                data.graves.forEach((grave, index) => {
                    const tab = document.createElement('button');
                    tab.className = `tab-button px-4 py-2 font-semibold text-stone-600 border-b-2 border-transparent hover:border-emerald-600 hover:text-emerald-600 transition-all`;
                    tab.textContent = grave.name;
                    tab.dataset.index = index;
                    tabsContainer.appendChild(tab);
                });

                const graveTabs = tabsContainer.querySelectorAll('button');

                function selectGraveTab(index) {
                    graveTabs.forEach(tab => {
                        tab.classList.remove('active');
                    });
                    graveTabs[index].classList.add('active');

                    const grave = data.graves[index];
                    contentContainer.innerHTML = `
                        <div class="p-4 bg-amber-50 rounded-lg">
                            <h3 class="text-xl font-bold text-emerald-700">${grave.name}</h3>
                            <div class="mt-4 grid md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="font-bold text-stone-700">ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                    <ul class="list-disc list-inside text-stone-600">
                                        ${grave.pros.map(p => `<li>${p}</li>`).join('')}
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-stone-700">ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                    <ul class="list-disc list-inside text-stone-600">
                                        ${grave.cons.map(c => `<li>${c}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                            <div class="mt-4">
                                <h4 class="font-bold text-stone-700">ä¸»ãªç‰¹å¾´ã¨è²»ç”¨</h4>
                                <ul class="list-disc list-inside text-stone-600">
                                    ${grave.features.map(f => `<li>${f}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }

                graveTabs.forEach(tab => {
                    tab.addEventListener('click', () => selectGraveTab(tab.dataset.index));
                });

                selectGraveTab(0);
            }

            function initEtiquetteAccordion() {
                const container = document.getElementById('etiquette-accordion');
                data.etiquette.forEach(item => {
                    const accordionItem = document.createElement('div');
                    accordionItem.className = 'border border-stone-200 rounded-md';
                    accordionItem.innerHTML = `
                        <button class="w-full text-left p-4 font-semibold text-stone-700 flex justify-between items-center hover:bg-amber-100">
                            <span>${item.question}</span>
                            <span class="transform transition-transform duration-300 ">â–¼</span>
                        </button>
                        <div class="p-4 bg-amber-50 text-stone-600 hidden">
                            ${item.answer}
                        </div>
                    `;
                    container.appendChild(accordionItem);
                });

                container.querySelectorAll('button').forEach(button => {
                    button.addEventListener('click', () => {
                        const content = button.nextElementSibling;
                        const icon = button.querySelector('span:last-child');
                        content.classList.toggle('hidden');
                        icon.classList.toggle('rotate-180');
                    });
                });
            }

            function initCostChart() {
                const ctx = document.getElementById('costChart').getContext('2d');
                costChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: data.costs.datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.raw.toLocaleString()} ä¸‡å††`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'è²»ç”¨ï¼ˆä¸‡å††ï¼‰'
                                }
                            }
                        }
                    }
                });
            }

            function updateCostChart(filter) {
                const indices = data.costs.filters[filter];
                const newLabels = indices.map(i => data.costs.labels[i]);
                const newData = indices.map(i => data.costs.datasets[0].data[i]);
                
                costChart.data.labels = newLabels;
                costChart.data.datasets[0].data = newData;
                costChart.update();
            }

            document.getElementById('cost-filter').addEventListener('change', (e) => {
                updateCostChart(e.target.value);
            });
            
            initFuneralTimeline();
            initGravesTabs();
            initEtiquetteAccordion();
            switchView('funeral');
        });
    </script>
</body>
</html>            transition: background-color 0.3s ease;
        }
        .timeline-item.active .timeline-dot {
            background-color: #047857;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .tab-button.active {
            border-color: #047857;
            color: #047857;
        }
    </style>
</head>
<body class="bg-amber-50 text-stone-800">

    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-emerald-800">ä¾›é¤Šã®ã¦ã³ã</h1>
            <p class="mt-2 text-stone-600">æ—¥æœ¬ã®ä¾›é¤Šã«é–¢ã™ã‚‹æ…£ç¿’ã‚’ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚</p>
        </header>

        <nav class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <button data-view="funeral" class="nav-button active bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸ•Šï¸</span>
                <span class="block mt-1 font-semibold text-emerald-700">è‘¬å„€ã®æµã‚Œ</span>
            </button>
            <button data-view="graves" class="nav-button bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸª¦</span>
                <span class="block mt-1 font-semibold text-emerald-700">ãŠå¢“ã®ç¨®é¡</span>
            </button>
            <button data-view="costs" class="nav-button bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸ’°</span>
                <span class="block mt-1 font-semibold text-emerald-700">è²»ç”¨ã®ç›®å®‰</span>
            </button>
            <button data-view="etiquette" class="nav-button bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-emerald-50 focus:outline-none">
                <span class="text-2xl">ğŸ¤</span>
                <span class="block mt-1 font-semibold text-emerald-700">ä½œæ³•ã¨ãƒãƒŠãƒ¼</span>
            </button>
        </nav>

        <main id="main-content" class="bg-white p-6 rounded-lg shadow-inner">
            <section id="funeral" class="content-section active">
                <h2 class="text-2xl font-bold mb-4 text-emerald-800">è‘¬å„€ã®æµã‚Œã‚’ç†è§£ã™ã‚‹</h2>
                <p class="mb-6 text-stone-600">ã”é€å»ã‹ã‚‰æ³•è¦ã¾ã§ã€ä¸€èˆ¬çš„ãªä»å¼ã®è‘¬å„€ã®æµã‚Œã‚’ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«è§£èª¬ã—ã¾ã™ã€‚å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€è©³ã—ã„èª¬æ˜ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                <div class="md:flex md:space-x-8">
                    <div id="timeline-container" class="md:w-1/3">
                    </div>
                    <div id="timeline-details" class="md:w-2/3 mt-6 md:mt-0 p-4 bg-amber-50 rounded-lg">
                    </div>
                </div>
            </section>

            <section id="graves" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-emerald-800">ãŠå¢“ã®ç¨®é¡ã‚’é¸ã¶</h2>
                <p class="mb-6 text-stone-600">è¿‘å¹´ã€ãŠå¢“ã«å¯¾ã™ã‚‹è€ƒãˆæ–¹ã¯å¤šæ§˜åŒ–ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€ä¼çµ±çš„ãªãŠå¢“ã‹ã‚‰æ–°ã—ã„å½¢ã®ä¾›é¤Šã¾ã§ã€ãã‚Œãã‚Œã®ç‰¹å¾´ã‚„è²»ç”¨ã‚’æ¯”è¼ƒã—ã€ã‚ãªãŸã«åˆã£ãŸé¸æŠè‚¢ã‚’è¦‹ã¤ã‘ã‚‹æ‰‹åŠ©ã‘ã‚’ã—ã¾ã™ã€‚</p>
                <div id="graves-tabs" class="flex border-b border-stone-200 mb-4">
                </div>
                <div id="graves-content">
                </div>
            </section>
            
            <section id="costs" class="content-section">
                 <h2 class="text-2xl font-bold mb-4 text-emerald-800">è²»ç”¨ã®ç›®å®‰ã‚’çŸ¥ã‚‹</h2>
                <p class="mb-6 text-stone-600">ä¾›é¤Šã«ã¯æ§˜ã€…ãªè²»ç”¨ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ä¸»ãªè²»ç”¨ã®å…¨å›½çš„ãªå¹³å‡ç›¸å ´ã‚’ã‚°ãƒ©ãƒ•ã§ç¤ºã—ã¾ã™ã€‚ä¸‹ã®ãƒœã‚¿ãƒ³ã§è¡¨ç¤ºã™ã‚‹å†…å®¹ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã€è²»ç”¨ã®å…¨ä½“åƒã‚’æŠŠæ¡ã—ã¾ã—ã‚‡ã†ã€‚</p>
                <div class="text-center mb-4">
                    <select id="cost-filter" class="p-2 border rounded-md shadow-sm">
                        <option value="all">å…¨ä½“ã®è²»ç”¨</option>
                        <option value="funeral">è‘¬å„€é–¢é€£</option>
                        <option value="grave">ãŠå¢“é–¢é€£</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="costChart"></canvas>
                </div>
            </section>

            <section id="etiquette" class="content-section">
                <h2 class="text-2xl font-bold mb-4 text-emerald-800">ä½œæ³•ã¨ãƒãƒŠãƒ¼ Q&A</h2>
                <p class="mb-6 text-stone-600">å¼”äº‹ã«ãŠã‘ã‚‹æœè£…ã‚„é¦™å…¸ã€è¨€è‘‰é£ã„ãªã©ã€çŸ¥ã£ã¦ãŠããŸã„åŸºæœ¬çš„ãªãƒãƒŠãƒ¼ã‚’Q&Aå½¢å¼ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚è³ªå•ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å›ç­”ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                <div id="etiquette-accordion" class="space-y-2">
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');
            const mainContent = document.getElementById('main-content');
            
            const data = {
                funeral: [
                    { title: 'ã”é€å»ãƒ»æ¬é€', content: 'åŒ»å¸«ã‹ã‚‰æ­»äº¡è¨ºæ–­æ›¸ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ãã®å¾Œã€è‘¬å„€ç¤¾ã«é€£çµ¡ã—ã€ã”éºä½“ã‚’å®‰ç½®å ´æ‰€ï¼ˆã”è‡ªå®…ã‚„æ–å ´ãªã©ï¼‰ã¸æ¬é€ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚' },
                    { title: 'å®‰ç½®ãƒ»æ•é£¾ã‚Š', content: 'ã”éºä½“ã‚’å®‰ç½®ã—ã€æ•å…ƒã«ãŠé£¾ã‚Šã‚’ã—ã¾ã™ï¼ˆæ•é£¾ã‚Šï¼‰ã€‚ã“ã®é–“ã«ã€è‘¬å„€ç¤¾ã¨è‘¬å„€ã®æ—¥ç¨‹ã‚„å†…å®¹ã®æ‰“ã¡åˆã‚ã›ã‚’è¡Œã„ã¾ã™ã€‚' },
                    { title: 'ç´æ£ºã®å„€', content: 'ã”éºä½“ã‚’æ¸…ã‚ã€æ­»è£…æŸã‚’ç€ã›ã€ãŠæ£ºã«ç´ã‚ã‚‹å„€å¼ã§ã™ã€‚æ•…äººãŒæ„›ç”¨ã—ã¦ã„ãŸã‚‚ã®ã‚’å‰¯è‘¬å“ã¨ã—ã¦ä¸€ç·’ã«å…¥ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚' },
                    { title: 'é€šå¤œ', content: 'æ•…äººã¨è¦ªã—ã„äººã€…ãŒå¤œé€šã—æœ€å¾Œã®åˆ¥ã‚Œã‚’æƒœã—ã‚€å„€å¼ã§ã™ã€‚è¿‘å¹´ã§ã¯ã€2æ™‚é–“ç¨‹åº¦ã®ã€ŒåŠé€šå¤œã€ãŒä¸€èˆ¬çš„ã§ã™ã€‚' },
                    { title: 'è‘¬å„€ãƒ»å‘Šåˆ¥å¼', content: 'åƒ§ä¾¶ã«ã‚ˆã‚‹èª­çµŒã‚„å‚åˆ—è€…ã«ã‚ˆã‚‹ç„¼é¦™ãŒè¡Œã‚ã‚Œã¾ã™ã€‚å‘Šåˆ¥å¼ã¯ã€æ•…äººã¨ã®æœ€å¾Œã®å¯¾é¢ã‚’ã—ã€ãŠåˆ¥ã‚Œã‚’å‘Šã’ã‚‹å ´ã§ã™ã€‚' },
                    { title: 'ç«è‘¬ãƒ»éª¨ä¸Šã’', content: 'ç«è‘¬å ´ã§ã”éºä½“ã‚’ç«è‘¬ã—ã¾ã™ã€‚ç«è‘¬å¾Œã€éºéª¨ã‚’éª¨å£·ã«ç´ã‚ã‚‹ã€Œéª¨ä¸Šã’ã€ã‚’è¿‘è¦ªè€…ã§è¡Œã„ã¾ã™ã€‚' },
                    { title: 'åˆä¸ƒæ—¥æ³•è¦', content: 'æœ¬æ¥ã¯äº¡ããªã£ã¦ã‹ã‚‰7æ—¥ç›®ã«è¡Œã†æ³•è¦ã§ã™ãŒã€æœ€è¿‘ã§ã¯ç«è‘¬å¾Œã‚„è‘¬å„€å½“æ—¥ã«ç¹°ã‚Šä¸Šã’ã¦è¡Œã†ã€Œç¹°ã‚Šä¸Šã’æ³•è¦ã€ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚' }
                ],
                graves: [
                    { name: 'ä¸€èˆ¬å¢“', features: ['ä»£ã€…å—ã‘ç¶™ãŒã‚Œã‚‹ä¼çµ±çš„ãªãŠå¢“', 'çŸ³æã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’è‡ªç”±ã«é¸ã¹ã‚‹', 'å¹´é–“ç®¡ç†è²»ãŒå¿…è¦', 'ç¶™æ‰¿è€…ãŒå¿…è¦', 'ç´„150ä¸‡ã€œ350ä¸‡å††'], pros: ['ä»£ã€…å—ã‘ç¶™ã’ã‚‹', 'è‡ªç”±ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã§ãã‚‹'], cons: ['è²»ç”¨ãŒé«˜ã‚', 'ç®¡ç†ã®æ‰‹é–“ãŒã‹ã‹ã‚‹'] },
                    { name: 'æ¨¹æœ¨è‘¬', features: ['å¢“çŸ³ã®ä»£ã‚ã‚Šã«æ¨¹æœ¨ã‚’å¢“æ¨™ã¨ã™ã‚‹', 'è‡ªç„¶ã«é‚„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§äººæ°—', 'ç¶™æ‰¿è€…ãŒä¸è¦ãªå ´åˆãŒå¤šã„', 'ç´„30ä¸‡ã€œ80ä¸‡å††'], pros: ['è²»ç”¨ãŒæ¯”è¼ƒçš„å®‰ä¾¡', 'ç¶™æ‰¿è€…ä¸è¦'], cons: ['åˆ†éª¨ã‚„æ”¹è‘¬ãŒå›°é›£', 'è¦ªæ—ã®ç†è§£ãŒå¿…è¦ãªå ´åˆã‚‚'] },
                    { name: 'ç´éª¨å ‚', features: ['å±‹å†…ã«éºéª¨ã‚’å®‰ç½®ã™ã‚‹æ–½è¨­', 'å¤©å€™ã«å·¦å³ã•ã‚ŒãšãŠå‚ã‚Šã§ãã‚‹', 'äº¤é€šã®ä¾¿ãŒè‰¯ã„å ´æ‰€ãŒå¤šã„', 'ç´„50ä¸‡ã€œ150ä¸‡å††'], pros: ['åˆ©ä¾¿æ€§ãŒé«˜ã„', 'ç®¡ç†ãŒæ¥½'], cons: ['æ°¸ä»£ã«æ¸¡ã‚‹ä¾›é¤ŠãŒé›£ã—ã„å ´åˆã‚‚', 'å€‹åˆ¥ã‚¹ãƒšãƒ¼ã‚¹ãŒç‹­ã„'] },
                    { name: 'æ°¸ä»£ä¾›é¤Šå¢“', features: ['å¯ºé™¢ã‚„éœŠåœ’ãŒæ°¸ä»£ã«ã‚ãŸã‚Šä¾›é¤Šãƒ»ç®¡ç†', 'ç¶™æ‰¿è€…ãŒã„ãªã„æ–¹å‘ã‘', 'ä»–ã®æ–¹ã®éºéª¨ã¨ä¸€ç·’ã«ç¥€ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„', 'ç´„10ä¸‡ã€œ100ä¸‡å††'], pros: ['è²»ç”¨ãŒå®‰ä¾¡', 'ç¶™æ‰¿è€…ä¸è¦', 'ç®¡ç†ãŒä¸è¦'], cons: ['ä»–ã®æ–¹ã¨ä¸€ç·’ã«åˆè‘¬ã•ã‚Œã‚‹', 'å€‹åˆ¥ã®ãŠå¢“ãŒãªã„'] },
                ],
                costs: {
                    labels: ['è‘¬å„€ä¸€å¼', 'é£²é£Ÿæ¥å¾…è²»', 'å¯ºé™¢è²»ç”¨', 'ä¸€èˆ¬å¢“', 'æ¨¹æœ¨è‘¬', 'ç´éª¨å ‚'],
                    datasets: [{
                        label: 'è²»ç”¨ï¼ˆä¸‡å††ï¼‰',
                        data: [120, 30, 45, 200, 60, 100],
                        backgroundColor: ['#10B981', '#34D399', '#6EE7B7', '#065F46', '#047857', '#059669'],
                    }],
                    filters: {
                        all: [0, 1, 2, 3, 4, 5],
                        funeral: [0, 1, 2],
                        grave: [3, 4, 5]
                    }
                },
                etiquette: [
                    { question: 'é€šå¤œã‚„è‘¬å„€ã®æœè£…ã¯ï¼Ÿ', answer: 'ç”·æ€§ã¯ãƒ–ãƒ©ãƒƒã‚¯ã‚¹ãƒ¼ãƒ„ã€å¥³æ€§ã¯ãƒ–ãƒ©ãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒãƒ«ãŒåŸºæœ¬ã§ã™ã€‚å­¦ç”Ÿã¯åˆ¶æœã§æ§‹ã„ã¾ã›ã‚“ã€‚å…‰æ²¢ã®ã‚ã‚‹ç´ æã‚„æ´¾æ‰‹ãªã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚' },
                    { question: 'é¦™å…¸ã®é‡‘é¡ã®ç›®å®‰ã¯ï¼Ÿ', answer: 'æ•…äººã¨ã®é–¢ä¿‚æ€§ã«ã‚ˆã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯çŸ¥äººãƒ»å‹äººãªã‚‰5åƒå††ã€è¦ªæ—ãªã‚‰1ä¸‡ã€œ5ä¸‡å††ãŒç›®å®‰ã§ã™ã€‚æ–°æœ­ã¯é¿ã‘ã€æ—§æœ­ã‚’é¦™å…¸è¢‹ã«å…¥ã‚Œã¾ã™ã€‚' },
                    { question: 'ãŠæ‚”ã‚„ã¿ã®è¨€è‘‰ã¯ï¼Ÿ', answer: 'ã€Œã“ã®åº¦ã¯ã”æ„å‚·æ§˜ã§ã™ã€ã€Œå¿ƒã‚ˆã‚ŠãŠæ‚”ã‚„ã¿ç”³ã—ä¸Šã’ã¾ã™ã€ãªã©ãŒä¸€èˆ¬çš„ã§ã™ã€‚ã€Œé‡ã­é‡ã­ã€ã€ŒãŸã³ãŸã³ã€ãªã©ã®é‡ã­è¨€è‘‰ã‚„ã€ç›´æ¥çš„ãªæ­»å› ã‚’å°‹ã­ã‚‹ã“ã¨ã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚' },
                    { question: 'ç„¼é¦™ã®ä½œæ³•ã¯ï¼Ÿ', answer: 'å®—æ´¾ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯å³æ‰‹ã®è¦ªæŒ‡ãƒ»äººå·®ã—æŒ‡ãƒ»ä¸­æŒ‡ã§æŠ¹é¦™ã‚’ã¤ã¾ã¿ã€é¡ã«æŠ¼ã—ã„ãŸã ã„ã¦ã‹ã‚‰é¦™ç‚‰ã«ãã¹ã¾ã™ã€‚å›æ•°ã¯1ã€œ3å›ãŒåŸºæœ¬ã§ã™ã€‚' }
                ]
            };
            
            let costChart;

            function switchView(view) {
                navButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if(btn.dataset.view === view) {
                        btn.classList.add('active');
                    }
                });

                contentSections.forEach(section => {
                    section.classList.remove('active');
                    if(section.id === view) {
                        section.classList.add('active');
                    }
                });

                if (view === 'costs') {
                    if (!costChart) {
                        initCostChart();
                    }
                    updateCostChart('all');
                }
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => switchView(button.dataset.view));
            });
            
            function initFuneralTimeline() {
                const container = document.getElementById('timeline-container');
                const details = document.getElementById('timeline-details');
                
                data.funeral.forEach((item, index) => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'timeline-item cursor-pointer';
                    itemEl.dataset.index = index;
                    itemEl.innerHTML = `
                        <div class="timeline-dot"></div>
                        <p class="font-semibold text-stone-700">${index + 1}. ${item.title}</p>
                    `;
                    container.appendChild(itemEl);
                });

                const timelineItems = container.querySelectorAll('.timeline-item');
                
                function selectTimelineItem(index) {
                    timelineItems.forEach(item => item.classList.remove('active'));
                    timelineItems[index].classList.add('active');
                    details.innerHTML = `
                        <h3 class="font-bold text-lg text-emerald-700 mb-2">${data.funeral[index].title}</h3>
                        <p class="text-stone-600">${data.funeral[index].content}</p>
                    `;
                }

                timelineItems.forEach(item => {
                    item.addEventListener('click', () => selectTimelineItem(item.dataset.index));
                });
                
                selectTimelineItem(0);
            }

            function initGravesTabs() {
                const tabsContainer = document.getElementById('graves-tabs');
                const contentContainer = document.getElementById('graves-content');

                data.graves.forEach((grave, index) => {
                    const tab = document.createElement('button');
                    tab.className = `tab-button px-4 py-2 font-semibold text-stone-600 border-b-2 border-transparent hover:border-emerald-600 hover:text-emerald-600 transition-all`;
                    tab.textContent = grave.name;
                    tab.dataset.index = index;
                    tabsContainer.appendChild(tab);
                });

                const graveTabs = tabsContainer.querySelectorAll('button');

                function selectGraveTab(index) {
                    graveTabs.forEach(tab => {
                        tab.classList.remove('active');
                    });
                    graveTabs[index].classList.add('active');

                    const grave = data.graves[index];
                    contentContainer.innerHTML = `
                        <div class="p-4 bg-amber-50 rounded-lg">
                            <h3 class="text-xl font-bold text-emerald-700">${grave.name}</h3>
                            <div class="mt-4 grid md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="font-bold text-stone-700">ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                    <ul class="list-disc list-inside text-stone-600">
                                        ${grave.pros.map(p => `<li>${p}</li>`).join('')}
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-stone-700">ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</h4>
                                    <ul class="list-disc list-inside text-stone-600">
                                        ${grave.cons.map(c => `<li>${c}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                            <div class="mt-4">
                                <h4 class="font-bold text-stone-700">ä¸»ãªç‰¹å¾´ã¨è²»ç”¨</h4>
                                <ul class="list-disc list-inside text-stone-600">
                                    ${grave.features.map(f => `<li>${f}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }

                graveTabs.forEach(tab => {
                    tab.addEventListener('click', () => selectGraveTab(tab.dataset.index));
                });

                selectGraveTab(0);
            }

            function initEtiquetteAccordion() {
                const container = document.getElementById('etiquette-accordion');
                data.etiquette.forEach(item => {
                    const accordionItem = document.createElement('div');
                    accordionItem.className = 'border border-stone-200 rounded-md';
                    accordionItem.innerHTML = `
                        <button class="w-full text-left p-4 font-semibold text-stone-700 flex justify-between items-center hover:bg-amber-100">
                            <span>${item.question}</span>
                            <span class="transform transition-transform duration-300 ">â–¼</span>
                        </button>
                        <div class="p-4 bg-amber-50 text-stone-600 hidden">
                            ${item.answer}
                        </div>
                    `;
                    container.appendChild(accordionItem);
                });

                container.querySelectorAll('button').forEach(button => {
                    button.addEventListener('click', () => {
                        const content = button.nextElementSibling;
                        const icon = button.querySelector('span:last-child');
                        content.classList.toggle('hidden');
                        icon.classList.toggle('rotate-180');
                    });
                });
            }

            function initCostChart() {
                const ctx = document.getElementById('costChart').getContext('2d');
                costChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: data.costs.datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.raw.toLocaleString()} ä¸‡å††`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'è²»ç”¨ï¼ˆä¸‡å††ï¼‰'
                                }
                            }
                        }
                    }
                });
            }

            function updateCostChart(filter) {
                const indices = data.costs.filters[filter];
                const newLabels = indices.map(i => data.costs.labels[i]);
                const newData = indices.map(i => data.costs.datasets[0].data[i]);
                
                costChart.data.labels = newLabels;
                costChart.data.datasets[0].data = newData;
                costChart.update();
            }

            document.getElementById('cost-filter').addEventListener('change', (e) => {
                updateCostChart(e.target.value);
            });
            
            initFuneralTimeline();
            initGravesTabs();
            initEtiquetteAccordion();
            switchView('funeral');
        });
    </script>
</body>
</html>
<footer class="mt-8 text-center text-stone-500">
    <h3 class="text-xl font-bold text-emerald-800 mb-4">ãŠå½¹ç«‹ã¡æƒ…å ±ã€ãœã²ã‚·ã‚§ã‚¢ã—ã¦ãã ã•ã„</h3>
    <div class="flex justify-center space-x-4">
        <a id="line-share-button" href="#" class="social-button text-4xl text-green-500 hover:text-green-600" aria-label="LINEã§ã‚·ã‚§ã‚¢">
            <!-- LINE SVG Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M11.95 24C5.356 24 .05 18.643 0 11.996C0 5.352 5.356 0 11.95 0c6.597 0 11.95 5.352 11.95 11.996c-.001 6.647-5.354 10.999-11.95 12zM12.012 5.166c-2.43 0-4.045 1.761-4.045 4.093c.001 1.093.58 1.948 1.547 2.613c.092.053.18.11.26.173a.35.35 0 0 1-.027.568c-.624.526-1.077 1.05-1.42 1.92c-.22.56-.037.712.56.516c.38-.13.916-.312 1.408-.553c.18-.088.358-.175.53-.255a.35.35 0 0 1 .533.05c.895 1.52 1.624 2.155 2.697 2.155c2.43 0 4.046-1.762 4.046-4.093c-.001-1.093-.58-1.949-1.547-2.614c-.092-.052-.18-.11-.26-.173a.35.35 0 0 1 .027-.568c.624-.526 1.077-1.05 1.42-1.92c.22-.56.037-.712-.56-.516c-.38.13-.916.312-1.408.553a2.38 2.38 0 0 0-.53.255a.35.35 0 0 1-.533-.05c-.895-1.52-1.624-2.155-2.697-2.155zm-.055 1.638c-.352 0-.64.286-.64.637s.287.638.64.638c.352 0 .64-.286.64-.637s-.287-.638-.64-.638zm.055 2.548c-.352 0-.64.286-.64.637s.287.638.64.638c.352 0 .64-.286.64-.637s-.287-.638-.64-.638z"/></svg>
        </a>
        <a id="x-share-button" href="#" class="social-button text-3xl text-stone-700 hover:text-stone-900" aria-label="Xã§ã‚·ã‚§ã‚¢">
            <!-- X SVG Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26l8.502 11.24h-7.214l-5.305-7.01l-5.904 7.01H.436l7.545-9.088L.556 2.25H8.08L13.23 9.69L18.244 2.25Zm-2.88 17.5l-.768-.96L6.516 3.99h3.76l8.803 11.66l.754.95H15.364Z"/></svg>
        </a>
        <a id="facebook-share-button" href="#" class="social-button text-3xl text-blue-600 hover:text-blue-700" aria-label="Facebookã§ã‚·ã‚§ã‚¢">
            <!-- Facebook SVG Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2.049c-5.409 0-9.75 4.341-9.75 9.75S6.591 21.549 12 21.549s9.75-4.341 9.75-9.75S17.409 2.049 12 2.049zM15.424 9.074h-2.128v-1.455c0-.528.204-.757.94-.757h1.15V4.621l-1.626-.007c-1.854 0-3.082 1.127-3.082 3.16v1.298h-1.92v2.433h1.92V18.17h3.194v-6.663h2.128l.338-2.433z"/></svg>
        </a>
    </div>
</footer>
